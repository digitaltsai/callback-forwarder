{"version":3,"sources":["../../client/Response.js"],"names":[],"mappings":"AAAA;;;;;;;;;;IAEM,Q;AACJ,oBAAY,MAAZ,EAAoB,GAApB,EAAyB;AAAA;;AACvB,SAAK,GAAL,GAAW;AACT,cAAQ;AADC,KAAX;AAGA,SAAK,MAAL,GAAc,MAAd;AACA,SAAK,GAAL,GAAW,GAAX;AACD;;;;2BAEM,O,EAAQ;AACb,WAAK,GAAL,CAAS,MAAT,GAAkB,OAAlB;AACA,aAAO,IAAP;AACD;;;2BAEM,K,EAAO,K,EAAO;AACnB,UAAI,QAAO,KAAP,yCAAO,KAAP,OAAiB,QAArB,EAA+B;AAC7B,aAAK,GAAL,CAAS,OAAT,GAAmB,KAAnB;AACD,OAFD,MAEO;AACL,aAAK,GAAL,CAAS,OAAT,uBACG,KADH,EACW,KADX;AAGD;AACD,aAAO,IAAP;AACD;;;yBAEI,G,EAAK;AACR,UAAI;AACF,eAAO,KAAK,GAAL,CAAS,KAAK,SAAL,CAAe,GAAf,CAAT,CAAP;AACD,OAFD,CAEE,OAAO,CAAP,EAAU;AACV,cAAM,IAAI,KAAJ,CAAU,cAAV,CAAN;AACD;AACF;;;wBAEG,G,EAAK;AACP,WAAK,GAAL,CAAS,IAAT,GAAgB,KAAK,GAAL,CAAS,IAAT,IAAiB,GAAjC;AACA,WAAK,MAAL,CAAY,OAAZ,CAAoB,KAAK,GAAzB,EAA8B,KAAK,GAAnC;AACA,aAAO,IAAP;AACD;;;yBAEI,G,EAAK;AACR,aAAO,KAAK,GAAL,CAAS,GAAT,CAAP;AACD;;;+BAEU,M,EAAQ;AACjB,aAAO,KAAK,MAAL,CAAY,MAAZ,EAAoB,GAApB,EAAP;AACD;;;;;;AAGH,OAAO,OAAP,GAAiB,QAAjB","file":"Response.js","sourcesContent":["'use strict';\n\nclass Response {\n  constructor(client, tid) {\n    this.res = {\n      status: 200,\n    };\n    this.client = client;\n    this.tid = tid;\n  }\n\n  status(status) {\n    this.res.status = status;\n    return this;\n  }\n\n  header(field, value) {\n    if (typeof field === 'object') {\n      this.res.headers = field;\n    } else {\n      this.res.headers = {\n        [field]: value,\n      };\n    }\n    return this;\n  }\n\n  json(str) {\n    try {\n      return this.end(JSON.stringify(str));\n    } catch (e) {\n      throw new Error('Invalid JSON');\n    }\n  }\n\n  end(str) {\n    this.res.body = this.res.body || str;\n    this.client.sendRes(this.tid, this.res);\n    return this;\n  }\n\n  send(str) {\n    return this.end(str);\n  }\n\n  sendStatus(status) {\n    return this.status(status).end();\n  }\n}\n\nmodule.exports = Response;\n"]}